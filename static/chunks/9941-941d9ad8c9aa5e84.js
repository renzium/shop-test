"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9941],{74055:function(e,n,t){t.d(n,{Z:function(){return f}});var i=t(14251),r=t(44747),o=t(85893),s=t(45697),a=t.n(s),c=t(67294),l=t(92879),d=t(2734),u=t(41796),p=t(42287),h=t(15861);function x(){var e=(0,d.Z)(),n="rtl"===e.direction,t=e.palette.grey[600].replace("#",""),r=function(e){return"url(https://api.iconify.design/carbon/".concat(e,".svg?color=%23").concat(t,"&width=").concat(32,"&height=").concat(32,")")},s=function(n){return{opacity:1,alignItems:"center",display:"inline-flex",justifyContent:"center",backgroundImage:"unset",backgroundColor:"transparent",transition:e.transitions.create("opacity"),"&:before":{display:"block",width:32,height:32,content:r(n)},"&:hover":{opacity:.72}}};return(0,o.jsx)(p.Z,{styles:{"& .ReactModalPortal":{"& .ril__outer":{backgroundColor:(0,u.Fq)(e.palette.grey[900],.96)},"& .ril__toolbar":{height:"auto !important",padding:e.spacing(2,3),backgroundColor:"transparent"},"& .ril__toolbarLeftSide":{display:"none"},"& .ril__toolbarRightSide":{height:"auto !important",padding:0,flexGrow:1,display:"flex",alignItems:"center","& li":{display:"flex",alignItems:"center"},"& li:first-of-type":{flexGrow:1},"& li:not(:first-of-type)":{width:40,height:40,justifyContent:"center",marginLeft:e.spacing(2)}},"& button:focus":{outline:"none"},"& .ril__toolbarRightSide button":{width:"100%",height:"100%","&.ril__zoomInButton":s("zoom-in"),"&.ril__zoomOutButton":s("zoom-out"),"&.ril__closeButton":s("close")},"& .ril__navButtons":{padding:e.spacing(3),"&.ril__navButtonPrev":(0,i.Z)({right:"auto",left:e.spacing(2)},s(n?"arrow-right":"arrow-left")),"&.ril__navButtonNext":(0,i.Z)({left:"auto",right:e.spacing(2)},s(n?"arrow-left":"arrow-right"))}}}})}function f(e){var n=e.images,t=e.photoIndex,s=e.setPhotoIndex,a=e.isOpen,d=(0,r.Z)(e,["images","photoIndex","setPhotoIndex","isOpen"]);(0,c.useEffect)((function(){document.body.style.overflow=a?"hidden":""}),[a]);var u=[(0,o.jsx)(h.Z,{variant:"subtitle2",children:"".concat(t+1," / ").concat(n.length)})];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x,{}),a&&(0,o.jsx)(l.Z,(0,i.Z)({animationDuration:160,nextSrc:n[(t+1)%n.length],prevSrc:n[(t+n.length-1)%n.length],onMovePrevRequest:function(){return s((t+n.length-1)%n.length)},onMoveNextRequest:function(){return s((t+1)%n.length)},toolbarButtons:u,reactModalStyle:{overlay:{zIndex:9999}}},d))]})}f.propTypes={images:a().array.isRequired,photoIndex:a().number,setPhotoIndex:a().func,isOpen:a().bool}},26319:function(e,n,t){var i=t(5152),r=t.n(i)()((function(){return Promise.all([t.e(314),t.e(9510),t.e(1221)]).then(t.bind(t,31221))}),{loadableGenerated:{webpack:function(){return[31221]}},ssr:!1});n.Z=r},89941:function(e,n,t){t.d(n,{mb:function(){return hn},zL:function(){return Ge}});var i=t(14251),r=t(52875),o=t(85893),s=t(45697),a=t.n(s),c=t(67294),l=t(90948),d=t(2734),u=t(93946),p=t(67720),h=t(87357),x=t(58826),f=t(55102),g=t(34444),v=t(44908),m=t.n(v),j=t(85564),Z=t.n(j),y=t(11057),b=t(57922),w=t(15861),C=t(55267),I=t(27214),S=t(75447),P=(0,l.ZP)("div")((function(e){return{flexGrow:1,height:"100%",display:"flex",overflow:"hidden",flexDirection:"column",paddingBottom:e.theme.spacing(2)}})),k=(0,l.ZP)("div")((function(e){var n=e.theme;return{display:"flex",alignItems:"center",marginTop:n.spacing(2),padding:n.spacing(0,2.5)}})),R=(0,l.ZP)("div")((function(e){var n=e.theme;return{width:40,height:40,flexShrink:0,display:"flex",overflow:"hidden",alignItems:"center",justifyContent:"center",color:n.palette.text.secondary,borderRadius:n.shape.borderRadius,backgroundColor:n.palette.grey[50016]}})),T=(0,l.ZP)(y.Z)((function(e){var n=e.theme;return(0,r.Z)((0,i.Z)({},n.typography.overline),{height:40,flexShrink:0,borderRadius:0,padding:n.spacing(1,2),justifyContent:"space-between",color:n.palette.text.disabled})}));function O(e){var n=e.conversation,t=e.isCollapse,i=e.onCollapse,r=m()(Z()(n.messages.map((function(e){return e.attachments})))).length;return(0,o.jsxs)(P,{children:[(0,o.jsxs)(T,{fullWidth:!0,color:"inherit",onClick:i,endIcon:(0,o.jsx)(g.Z,{icon:t?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:["attachment (",r,")"]}),!t&&(0,o.jsx)(p.Z,{}),(0,o.jsx)(S.Z,{children:(0,o.jsx)(b.Z,{in:t,children:n.messages.map((function(e){return(0,o.jsx)("div",{children:e.attachments.map((function(n){return(0,o.jsx)(_,{file:e,fileUrl:n},n)}))},e.id)}))})})]})}function _(e){var n=e.file,t=e.fileUrl;return(0,o.jsxs)(k,{children:[(0,o.jsx)(R,{children:(0,I.PF)(t)}),(0,o.jsxs)(h.Z,{sx:{ml:1.5,maxWidth:150},children:[(0,o.jsx)(w.Z,{variant:"body2",noWrap:!0,children:(0,I.lW)(t)}),(0,o.jsx)(w.Z,{noWrap:!0,variant:"caption",sx:{color:"text.secondary",display:"block"},children:(0,C.zM)(n.createdAt)})]})]},t)}O.propTypes={conversation:a().object.isRequired,isCollapse:a().bool,onCollapse:a().func},_.propTypes={file:a().object,fileUrl:a().string};var A=t(69779),q=t(87952),M=(0,l.ZP)(y.Z)((function(e){var n=e.theme;return(0,r.Z)((0,i.Z)({},n.typography.overline),{height:40,borderRadius:0,padding:n.spacing(1,2),justifyContent:"space-between",color:n.palette.text.disabled})})),W=(0,l.ZP)("div")((function(e){return{display:"flex",margin:e.theme.spacing(1.5,0)}})),z=(0,l.ZP)(g.Z)((function(e){var n=e.theme;return{width:16,height:16,marginTop:4,marginRight:n.spacing(1),color:n.palette.text.secondary}})),F=(0,l.ZP)(w.Z)((function(e){var n=e.theme;return(0,i.Z)({flexGrow:1,maxWidth:160,wordWrap:"break-word"},n.typography.body2)}));function B(e){var n=e.participants,t=e.isCollapse,i=e.onCollapse,r=(0,A.Z)(n)[0];return void 0===r?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(h.Z,{sx:{pt:4,pb:3,display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,o.jsx)(q.Z,{alt:r.name,src:r.avatar,sx:{width:96,height:96}}),(0,o.jsxs)(h.Z,{sx:{mt:2,textAlign:"center"},children:[(0,o.jsx)(w.Z,{variant:"subtitle1",children:r.name}),(0,o.jsx)(w.Z,{variant:"body2",sx:{color:"text.secondary"},children:r.position})]})]}),(0,o.jsx)(p.Z,{}),(0,o.jsx)(M,{fullWidth:!0,color:"inherit",onClick:i,endIcon:(0,o.jsx)(g.Z,{icon:t?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:"information"}),(0,o.jsx)(b.Z,{in:t,children:(0,o.jsxs)(h.Z,{sx:{px:2.5,pb:1},children:[(0,o.jsxs)(W,{children:[(0,o.jsx)(z,{icon:"eva:pin-fill"}),(0,o.jsx)(F,{children:r.address})]}),(0,o.jsxs)(W,{children:[(0,o.jsx)(z,{icon:"eva:phone-fill"}),(0,o.jsx)(F,{children:r.phone})]}),(0,o.jsxs)(W,{children:[(0,o.jsx)(z,{icon:"eva:email-fill"}),(0,o.jsx)(F,{children:r.email})]})]})})]})}B.propTypes={participants:a().array.isRequired,isCollapse:a().bool,onCollapse:a().func};var D=t(78462),E=t(98619),L=t(18987),G=t(59334),U=t(66485),N=t(6514),H=t(55660),K=(0,l.ZP)("div")((function(e){return{display:"flex",alignItems:"center",justifyContent:"center",marginTop:e.theme.spacing(1.5)}}));function Y(e){var n=e.participant,t=e.isOpen,i=e.onClose,r=n.name,s=n.avatar,a=n.position,c=n.address,l=n.phone,d=n.email;return(0,o.jsx)(H.Kl,{fullWidth:!0,maxWidth:"xs",open:t,onClose:i,children:(0,o.jsxs)(N.Z,{sx:{pb:5,textAlign:"center"},children:[(0,o.jsx)(q.Z,{alt:r,src:s,sx:{mt:5,mb:2,mx:"auto",width:96,height:96}}),(0,o.jsx)(w.Z,{variant:"h6",children:r}),(0,o.jsx)(w.Z,{variant:"body2",paragraph:!0,sx:{color:"text.secondary"},children:a}),(0,o.jsxs)(K,{children:[(0,o.jsx)(g.Z,{icon:"eva:pin-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),(0,o.jsx)(w.Z,{variant:"body2",children:c})]}),(0,o.jsxs)(K,{children:[(0,o.jsx)(g.Z,{icon:"eva:phone-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),(0,o.jsx)(w.Z,{variant:"body2",children:l})]}),(0,o.jsxs)(K,{children:[(0,o.jsx)(g.Z,{icon:"eva:email-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),(0,o.jsx)(w.Z,{variant:"body2",children:d})]})]})})}Y.propTypes={participant:a().object,isOpen:a().bool,onClose:a().func};var Q=(0,l.ZP)(y.Z)((function(e){var n=e.theme;return(0,r.Z)((0,i.Z)({},n.typography.overline),{height:40,borderRadius:0,padding:n.spacing(1,2),justifyContent:"space-between",color:n.palette.text.disabled})}));function V(e){var n=e.participants,t=e.selectUserId,i=e.onShowPopupUserInfo,r=e.isCollapse,s=e.onCollapse;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Q,{fullWidth:!0,disableRipple:!0,color:"inherit",onClick:s,endIcon:(0,o.jsx)(g.Z,{icon:r?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:["In room (",n.length,")"]}),(0,o.jsx)(h.Z,{sx:{height:r?256:0},children:(0,o.jsx)(S.Z,{children:(0,o.jsx)(b.Z,{in:r,sx:{height:r?256:0},children:(0,o.jsx)(D.Z,{disablePadding:!0,children:n.map((function(e){return(0,o.jsx)(J,{participant:e,isOpen:t===e.id,onShowPopup:function(){return i(e.id)},onClosePopup:function(){return i(null)}},e.id)}))})})})})]})}function J(e){var n=e.participant,t=e.isOpen,i=e.onClosePopup,r=e.onShowPopup,s=n.name,a=n.avatar,c=n.status,l=n.position;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(E.Z,{onClick:r,sx:{height:64,px:2.5},children:[(0,o.jsx)(L.Z,{children:(0,o.jsxs)(h.Z,{sx:{position:"relative",width:40,height:40},children:[(0,o.jsx)(q.Z,{alt:s,src:a}),(0,o.jsx)(U.Z,{status:c,sx:{right:0,bottom:0,position:"absolute"}})]})}),(0,o.jsx)(G.Z,{primary:s,secondary:l,primaryTypographyProps:{variant:"subtitle2",noWrap:!0},secondaryTypographyProps:{noWrap:!0}})]}),(0,o.jsx)(Y,{participant:n,isOpen:t,onClose:i})]})}V.propTypes={participants:a().array.isRequired,selectUserId:a().string,onShowPopupUserInfo:a().func,isCollapse:a().bool,onCollapse:a().func},J.propTypes={participant:a().object.isRequired,isOpen:a().bool,onClosePopup:a().func,onShowPopup:a().func};var X=(0,l.ZP)((function(e){return(0,o.jsx)(u.Z,(0,i.Z)({disableRipple:!0},e))}))((function(e){var n=e.theme;return{right:0,zIndex:9,width:32,height:32,position:"absolute",top:n.spacing(1),boxShadow:n.customShadows.z8,backgroundColor:n.palette.background.paper,border:"solid 1px ".concat(n.palette.divider),borderRight:0,borderRadius:"12px 0 0 12px",transition:n.transitions.create("all"),"&:hover":{backgroundColor:n.palette.background.neutral}}})),$=240;function ee(e){var n=e.conversation,t=e.participants,s=(0,d.Z)(),a=(0,c.useState)(!0),l=a[0],u=a[1],v=(0,c.useState)(!0),m=v[0],j=v[1],Z=(0,c.useState)(null),y=Z[0],b=Z[1],w=(0,c.useState)(!0),C=w[0],I=w[1],S=(0,c.useState)(!0),P=S[0],k=S[1],R=(0,f.Z)("up","lg"),T=t.length>1;(0,c.useEffect)((function(){return R?_():A()}),[R]);var _=function(){u(!0)},A=function(){u(!1)},q=(0,o.jsxs)(o.Fragment,{children:[T?(0,o.jsx)(V,{selectUserId:y,participants:t,isCollapse:P,onShowPopupUserInfo:function(e){return b(e)},onCollapse:function(){return k((function(e){return!e}))}}):(0,o.jsx)("div",{children:(0,o.jsx)(B,{participants:t,isCollapse:m,onCollapse:function(){return j((function(e){return!e}))}})}),(0,o.jsx)(p.Z,{}),(0,o.jsx)(O,{conversation:n,isCollapse:C,onCollapse:function(){return I((function(e){return!e}))}})]});return(0,o.jsxs)(h.Z,{sx:{position:"relative"},children:[(0,o.jsx)(X,{onClick:function(){u((function(e){return!e}))},sx:(0,i.Z)({},l&&R&&{right:$}),children:(0,o.jsx)(g.Z,{width:16,height:16,icon:l?"eva:arrow-ios-forward-fill":"eva:arrow-ios-back-fill"})}),R?(0,o.jsx)(x.ZP,{open:l,anchor:"right",variant:"persistent",sx:(0,r.Z)((0,i.Z)({height:1,width:$,transition:s.transitions.create("width")},!l&&{width:"0px"}),{"& .MuiDrawer-paper":{position:"static",width:$}}),children:q}):(0,o.jsx)(x.ZP,{anchor:"right",ModalProps:{keepMounted:!0},open:l,onClose:A,sx:{"& .MuiDrawer-paper":{width:$}},children:q})]})}ee.propTypes={conversation:a().object.isRequired,participants:a().array.isRequired};var ne=t(34727),te=t(70655),ie=t(11163),re=t.n(ie),oe=t(79718),se=t(34430),ae=t(76939),ce=t(74055),le=t(91713),de=(0,l.ZP)("div")((function(e){return{display:"flex",marginBottom:e.theme.spacing(3)}})),ue=(0,l.ZP)("div")((function(e){var n=e.theme;return{display:"inline-block",maxWidth:320,padding:n.spacing(1.5),marginTop:n.spacing(.5),borderRadius:n.shape.borderRadius,backgroundColor:n.palette.background.neutral}})),pe=(0,l.ZP)(w.Z)((function(e){var n=e.theme;return{display:"flex",marginBottom:n.spacing(.75),color:n.palette.text.secondary}})),he=(0,l.ZP)("img")((function(e){return{height:200,minWidth:296,width:"100%",cursor:"pointer",objectFit:"cover",borderRadius:e.theme.shape.borderRadius}}));function xe(e){var n=e.message,t=e.conversation,r=e.onOpenLightbox,s=t.participants.find((function(e){return e.id===n.senderId})),a="8864c717-587d-472a-929a-8e5f298024da-0"===n.senderId?{type:"me"}:{avatar:null===s||void 0===s?void 0:s.avatar,name:null===s||void 0===s?void 0:s.name},c="me"===a.type,l="image"===n.contentType,d=a.name&&a.name.split(" ")[0];return(0,o.jsx)(de,{children:(0,o.jsxs)(h.Z,{sx:(0,i.Z)({display:"flex"},c&&{ml:"auto"}),children:["me"!==a.type&&(0,o.jsx)(q.Z,{alt:a.name,src:a.avatar,sx:{width:32,height:32}}),(0,o.jsxs)(h.Z,{sx:{ml:2},children:[(0,o.jsxs)(pe,{noWrap:!0,variant:"caption",sx:(0,i.Z)({},c&&{justifyContent:"flex-end"}),children:[!c&&"".concat(d,","),"\xa0",(0,le.Z)(new Date(n.createdAt),{addSuffix:!0})]}),(0,o.jsx)(ue,{sx:(0,i.Z)({},c&&{color:"grey.800",bgcolor:"primary.lighter"}),children:l?(0,o.jsx)(he,{alt:"attachment",src:n.body,onClick:function(){return r(n.body)}}):(0,o.jsx)(w.Z,{variant:"body2",children:n.body})})]})]})})}function fe(e){var n=e.conversation,t=(0,c.useRef)(null),i=(0,c.useState)(!1),r=i[0],s=i[1],a=(0,c.useState)(0),l=a[0],d=a[1];(0,c.useEffect)((function(){t.current&&(t.current.scrollTop=t.current.scrollHeight)}),[n.messages]);var u=n.messages.filter((function(e){return"image"===e.contentType})).map((function(e){return e.body})),p=function(e){var n=u.findIndex((function(n){return n===e}));s(!0),d(n)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S.Z,{scrollableNodeProps:{ref:t},sx:{p:3,height:1},children:n.messages.map((function(e){return(0,o.jsx)(xe,{message:e,conversation:n,onOpenLightbox:p},e.id)}))}),(0,o.jsx)(ce.Z,{images:u,mainSrc:u[l],photoIndex:l,setPhotoIndex:d,isOpen:r,onCloseRequest:function(){return s(!1)}})]})}xe.propTypes={message:a().object.isRequired,conversation:a().object.isRequired,onOpenLightbox:a().func},fe.propTypes={conversation:a().object.isRequired};var ge=t(48389),ve=t(51107),me=t(23795),je=(0,l.ZP)("div")((function(e){return{flexShrink:0,minHeight:92,display:"flex",alignItems:"center",padding:e.theme.spacing(0,3)}}));function Ze(e){var n=e.participants,t=n.length>1;return(0,o.jsxs)(je,{children:[t?(0,o.jsx)(be,{participants:n}):(0,o.jsx)(ye,{participants:n}),(0,o.jsx)(h.Z,{sx:{flexGrow:1}}),(0,o.jsx)(u.Z,{children:(0,o.jsx)(g.Z,{icon:"eva:phone-fill",width:20,height:20})}),(0,o.jsx)(u.Z,{children:(0,o.jsx)(g.Z,{icon:"eva:video-fill",width:20,height:20})}),(0,o.jsx)(u.Z,{children:(0,o.jsx)(g.Z,{icon:"eva:more-vertical-fill",width:20,height:20})})]})}function ye(e){var n=e.participants,t=(0,A.Z)(n)[0];return void 0!==t&&t.status?(0,o.jsxs)(h.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,o.jsxs)(h.Z,{sx:{position:"relative"},children:[(0,o.jsx)(q.Z,{src:t.avatar,alt:t.name}),(0,o.jsx)(U.Z,{status:t.status,sx:{position:"absolute",right:2,bottom:2}})]}),(0,o.jsxs)(h.Z,{sx:{ml:2},children:[(0,o.jsx)(w.Z,{variant:"subtitle2",children:t.name}),(0,o.jsx)(w.Z,{variant:"body2",sx:{color:"text.secondary"},children:"offline"!==t.status?(0,ge.I)(t.status):(0,C.DY)(t.lastActivity||"")})]})]}):null}function be(e){var n=e.participants;return(0,o.jsxs)("div",{children:[(0,o.jsx)(ve.Z,{max:3,sx:{mb:.5,"& .MuiAvatar-root":{width:32,height:32}},children:n.map((function(e){return(0,o.jsx)(q.Z,{alt:e.name,src:e.avatar},e.id)}))}),(0,o.jsx)(me.Z,{variant:"body2",underline:"none",component:"button",color:"text.secondary",onClick:function(){},children:(0,o.jsxs)(h.Z,{sx:{display:"flex",alignItems:"center"},children:[n.length," persons",(0,o.jsx)(g.Z,{icon:"eva:arrow-ios-forward-fill"})]})})]})}Ze.propTypes={participants:a().array.isRequired},ye.propTypes={participants:a().array.isRequired},be.propTypes={participants:a().array.isRequired};var we=t(79332),Ce=t(87109),Ie=t(26447),Se=t(8018),Pe=t(26319),ke=(0,l.ZP)("div")((function(e){return{minHeight:56,display:"flex",position:"relative",alignItems:"center",paddingLeft:e.theme.spacing(2)}}));function Re(e){var n=e.disabled,t=e.conversationId,i=e.onSend,r=(0,c.useRef)(null),s=(0,c.useState)(""),a=s[0],l=s[1],d=function(){var e;null===(e=r.current)||void 0===e||e.click()},h=function(){return a?(i&&t&&i({conversationId:t,messageId:(0,Se.Z)(),message:a,contentType:"text",attachments:[],createdAt:new Date,senderId:"8864c717-587d-472a-929a-8e5f298024da-0"}),l("")):""};return(0,o.jsxs)(ke,{children:[(0,o.jsx)(we.Z,{disabled:n,fullWidth:!0,value:a,disableUnderline:!0,onKeyUp:function(e){"Enter"===e.key&&h()},onChange:function(e){return l(e.target.value)},placeholder:"Type a message",startAdornment:(0,o.jsx)(Ce.Z,{position:"start",children:(0,o.jsx)(Pe.Z,{disabled:n,value:a,setValue:l})}),endAdornment:(0,o.jsxs)(Ie.Z,{direction:"row",spacing:1,sx:{flexShrink:0,mr:1.5},children:[(0,o.jsx)(u.Z,{disabled:n,size:"small",onClick:d,children:(0,o.jsx)(g.Z,{icon:"ic:round-add-photo-alternate",width:22,height:22})}),(0,o.jsx)(u.Z,{disabled:n,size:"small",onClick:d,children:(0,o.jsx)(g.Z,{icon:"eva:attach-2-fill",width:22,height:22})}),(0,o.jsx)(u.Z,{disabled:n,size:"small",children:(0,o.jsx)(g.Z,{icon:"eva:mic-fill",width:22,height:22})})]})}),(0,o.jsx)(p.Z,{orientation:"vertical",flexItem:!0}),(0,o.jsx)(u.Z,{color:"primary",disabled:!a,onClick:h,sx:{mx:1},children:(0,o.jsx)(g.Z,{icon:"ic:round-send",width:22,height:22})}),(0,o.jsx)("input",{type:"file",ref:r,style:{display:"none"}})]})}Re.propTypes={disabled:a().bool,conversationId:a().string,onSend:a().func};var Te=t(67573),Oe=t(23370),_e=t.n(Oe),Ae=t(11447),qe=t.n(Ae),Me=t(41796),We=t(5306),ze=t(87918),Fe=t(50135),Be=t(96434),De=(0,l.ZP)("div")((function(e){return{display:"flex",alignItems:"center",padding:e.theme.spacing(2,3)}})),Ee=(0,l.ZP)("div")((function(e){var n=e.theme;return{"& .MuiAutocomplete-root":(0,Te.Z)({width:240,marginLeft:n.spacing(2),"&.Mui-focused .MuiAutocomplete-inputRoot":{boxShadow:n.customShadows.z8}},n.breakpoints.up("sm"),{width:280}),"& .MuiAutocomplete-inputRoot":{transition:n.transitions.create("box-shadow",{easing:n.transitions.easing.easeInOut,duration:n.transitions.duration.shorter}),"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(n.palette.grey[50032]," !important")}}}}));function Le(e){var n=e.contacts,t=e.recipients,s=e.onAddRecipients,a=(0,c.useState)(""),l=a[0],d=a[1];return(0,o.jsxs)(De,{children:[(0,o.jsx)(w.Z,{variant:"subtitle2",sx:{color:"text.secondary"},children:"To:"}),(0,o.jsx)(Ee,{children:(0,o.jsx)(We.Z,{multiple:!0,size:"small",disablePortal:!0,popupIcon:null,noOptionsText:(0,o.jsx)(Be.Z,{searchQuery:l}),onChange:function(e,n){return function(e){d(""),s(e)}(n)},onInputChange:function(e,n){return d(n)},options:n,getOptionLabel:function(e){return e.name},renderOption:function(e,n,t){var s=t.inputValue,a=t.selected,c=n.name,l=n.avatar,d=qe()(c,s),u=_e()(c,d);return(0,o.jsxs)(h.Z,(0,r.Z)((0,i.Z)({component:"li",sx:{p:"12px !important"}},e),{children:[(0,o.jsxs)(h.Z,{sx:{mr:1.5,width:32,height:32,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[(0,o.jsx)(q.Z,{alt:c,src:l}),(0,o.jsx)(h.Z,{sx:(0,i.Z)({top:0,opacity:0,width:"100%",height:"100%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",bgcolor:function(e){return(0,Me.Fq)(e.palette.grey[900],.8)},transition:function(e){return e.transitions.create("opacity",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.shorter})}},a&&{opacity:1,color:"primary.main"}),children:(0,o.jsx)(g.Z,{icon:"eva:checkmark-fill",width:20,height:20})})]}),u.map((function(e,n){return(0,o.jsx)(w.Z,{variant:"subtitle2",color:e.highlight?"primary":"textPrimary",children:e.text},n)}))]}))},renderTags:function(e,n){return e.map((function(e,t){var s=e.id,a=e.name,l=e.avatar;return(0,c.createElement)(ze.Z,(0,r.Z)((0,i.Z)({},n({index:t})),{key:s,size:"small",label:a,color:"info",avatar:(0,o.jsx)(q.Z,{alt:a,src:l})}))}))},renderInput:function(e){return(0,o.jsx)(Fe.Z,(0,r.Z)((0,i.Z)({},e),{placeholder:0===t.length?"Recipients":""}))}})})]})}Le.propTypes={contacts:a().array,recipients:a().array,onAddRecipients:a().func};function Ge(){var e=(0,oe.I0)(),n=(0,ie.useRouter)(),t=n.pathname,i=n.query.conversationKey,r=(0,oe.v9)((function(e){return e.chat})),s=r.contacts,a=r.recipients,l=r.participants,d=r.activeConversationId,u=(0,oe.v9)((function(e){return function(e){var n=e.chat,t=n.conversations,i=n.activeConversationId,r=i?t.byId[i]:null;return r||{id:"",messages:[],participants:[],unreadCount:0,type:""}}(e)})),x=i?"DETAIL":"COMPOSE",f=l.filter((function(e){return"8864c717-587d-472a-929a-8e5f298024da-0"!==e.id}));(0,c.useEffect)((function(){var n=function(){var n=(0,ne.Z)((function(){var n;return(0,te.__generator)(this,(function(t){switch(t.label){case 0:e((0,se.aS)("".concat(i))),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e((0,se.cc)("".concat(i)))];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),console.error(n),re().push(ae.vB.chat.new),[3,4];case 4:return[2]}}))}));return function(){return n.apply(this,arguments)}}();i?n():d&&e((0,se.PY)())}),[i]),(0,c.useEffect)((function(){d&&e((0,se.R7)(d))}),[e,d]);var g=function(){var n=(0,ne.Z)((function(n){return(0,te.__generator)(this,(function(t){try{e((0,se.Bs)(n))}catch(i){console.error(i)}return[2]}))}));return function(e){return n.apply(this,arguments)}}();return(0,o.jsxs)(h.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:["DETAIL"===x?(0,o.jsx)(Ze,{participants:f}):(0,o.jsx)(Le,{recipients:a,contacts:Object.values(s.byId),onAddRecipients:function(n){e((0,se.sS)(n))}}),(0,o.jsx)(p.Z,{}),(0,o.jsxs)(h.Z,{sx:{flexGrow:1,display:"flex",overflow:"hidden"},children:[(0,o.jsxs)(h.Z,{sx:{display:"flex",flexGrow:1,flexDirection:"column"},children:[(0,o.jsx)(fe,{conversation:u}),(0,o.jsx)(p.Z,{}),(0,o.jsx)(Re,{conversationId:d,onSend:g,disabled:t===ae.vB.chat.root||t===ae.vB.chat.new})]}),"DETAIL"===x&&(0,o.jsx)(ee,{conversation:u,participants:f})]})]})}var Ue=t(34386),Ne=t(18972),He=t(18360),Ke=t(77364),Ye=t(99606),Qe=t(84818),Ve=["online","invisible","away"];function Je(){var e=(0,Ke.Z)().user,n=(0,c.useState)("online"),t=n[0],r=n[1],s=(0,c.useState)(null),a=s[0],l=s[1],d={mr:2,width:20,height:20};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(h.Z,{sx:{position:"relative"},children:[(0,o.jsx)(Ye.Z,{onClick:function(e){l(e.currentTarget)},sx:{cursor:"pointer",width:48,height:48}}),(0,o.jsx)(U.Z,{status:t,sx:{position:"absolute",bottom:2,right:2}})]}),(0,o.jsxs)(Qe.Z,{open:Boolean(a),anchorEl:a,onClose:function(){l(null)},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},arrow:"left-top",sx:{p:0,ml:.5,width:"auto"},children:[(0,o.jsxs)(Ie.Z,{direction:"row",alignItems:"center",spacing:2,sx:{py:2,pr:1,pl:2.5},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(w.Z,{noWrap:!0,variant:"subtitle1",children:null===e||void 0===e?void 0:e.displayName}),(0,o.jsx)(w.Z,{noWrap:!0,variant:"body2",sx:{color:"text.secondary"},children:null===e||void 0===e?void 0:e.email})]}),(0,o.jsx)(Ue.Z,{title:"Log out",children:(0,o.jsx)(u.Z,{color:"error",children:(0,o.jsx)(g.Z,{icon:"ic:round-power-settings-new",width:20,height:20})})})]}),(0,o.jsx)(p.Z,{}),(0,o.jsxs)(D.Z,{sx:{px:1,"& .MuiMenuItem-root":{py:1,px:2,typography:"body2",borderRadius:.75}},children:[(0,o.jsxs)(Ne.Z,{children:[(0,o.jsx)(U.Z,{size:"large",status:t,sx:{m:.5,flexShrink:0}}),(0,o.jsx)(He.Z,{native:!0,fullWidth:!0,value:t,onChange:function(e){return r(e.target.value)},sx:{ml:2,"& svg":{display:"none"},"& select":{p:0,typography:"body2"},"& fieldset":{display:"none"}},children:Ve.map((function(e){return(0,o.jsx)("option",{value:e,children:(0,ge.I)(e)},e)}))})]}),(0,o.jsxs)(Ne.Z,{children:[(0,o.jsx)(g.Z,{icon:"ic:round-account-box",sx:(0,i.Z)({},d)}),"Profile"]}),(0,o.jsxs)(Ne.Z,{children:[(0,o.jsx)(g.Z,{icon:"eva:settings-2-fill",sx:(0,i.Z)({},d)}),"Settings"]})]})]})]})}var Xe=t(41664),$e=t.n(Xe),en=t(92369);function nn(e){var n=e.query,t=e.results,i=e.onSelectContact,r=t.length>0;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.Z,{paragraph:!0,variant:"subtitle1",sx:{px:3,color:"text.secondary"},children:"Contacts"}),t.map((function(e){return(0,o.jsxs)(E.Z,{onClick:function(){return i(e)},sx:{px:3,py:1.5,typography:"subtitle2"},children:[(0,o.jsx)(q.Z,{alt:e.name,src:e.avatar,sx:{mr:2}}),e.name]},e.id)})),!r&&(0,o.jsx)(Be.Z,{searchQuery:n,sx:{p:3,mx:"auto",width:"calc(100% - 48px)",bgcolor:"background.neutral"}})]})}nn.propTypes={query:a().string,results:a().array,onSelectContact:a().func};var tn=t(23926),rn=t(83826);function on(e){var n=e.query,t=e.onChange,i=e.onFocus,r=e.onClickAway;return(0,o.jsx)(tn.Z,{onClickAway:r,children:(0,o.jsx)(rn.Z,{fullWidth:!0,size:"small",value:n,onFocus:i,onChange:t,placeholder:"Search contacts...",InputProps:{startAdornment:(0,o.jsx)(Ce.Z,{position:"start",children:(0,o.jsx)(g.Z,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})},sx:{mt:2}})})}on.propTypes={query:a().string,onChange:a().func,onFocus:a().func,onClickAway:a().func};var sn=t(44747),an=t(99766),cn=(0,l.ZP)(E.Z)((function(e){var n=e.theme;return{padding:n.spacing(1.5,3),transition:n.transitions.create("all")}})),ln=(0,l.ZP)("div")((function(){return{position:"relative",width:48,height:48,"& .MuiAvatar-img":{borderRadius:"50%"},"& .MuiAvatar-root":{width:"100%",height:"100%"}}}));function dn(e){var n=e.isSelected,t=e.conversation,r=e.onSelectConversation,s=e.isOpenSidebar,a=function(e,n){var t=e.participants.filter((function(e){return e.id!==n})),i=t.map((function(e){return e.name})).join(", "),r="",o=e.messages[e.messages.length-1];if(o){var s=o.senderId===n?"You: ":"",a="image"===o.contentType?"Sent a photo":o.body;r="".concat(s).concat(a)}return{otherParticipants:t,displayNames:i,displayText:r}}(t,"8864c717-587d-472a-929a-8e5f298024da-0"),c=t.messages[t.messages.length-1].createdAt,l=a.otherParticipants.length>1,d=t.unreadCount>0,u=l&&a.otherParticipants.map((function(e){return e.status})).includes("online");return(0,o.jsxs)(cn,{disableGutters:!0,onClick:r,sx:(0,i.Z)({},n&&{bgcolor:"action.selected"}),children:[(0,o.jsx)(L.Z,{children:(0,o.jsxs)(h.Z,{sx:(0,i.Z)({},l&&{position:"relative",width:48,height:48,"& .avatarWrapper":{position:"absolute",width:32,height:32,"&:nth-of-type(1)":{left:0,zIndex:9,bottom:2,"& .MuiAvatar-root":{border:function(e){return"solid 2px ".concat(e.palette.background.paper)}}},"&:nth-of-type(2)":{top:2,right:0}}}),children:[a.otherParticipants.slice(0,2).map((function(e){return(0,o.jsxs)(ln,{className:"avatarWrapper",children:[(0,o.jsx)(q.Z,{alt:e.name,src:e.avatar}),!l&&(null===e||void 0===e?void 0:e.status)&&(0,o.jsx)(U.Z,{status:e.status,sx:{right:2,bottom:2,position:"absolute"}})]},e.id)})),u&&(0,o.jsx)(U.Z,{status:"online",sx:{right:2,bottom:2,position:"absolute"}})]})}),s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G.Z,{primary:a.displayNames,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:a.displayText,secondaryTypographyProps:{noWrap:!0,variant:d?"subtitle2":"body2",color:d?"textPrimary":"textSecondary"}}),(0,o.jsxs)(h.Z,{sx:{ml:2,height:44,display:"flex",alignItems:"flex-end",flexDirection:"column"},children:[(0,o.jsx)(h.Z,{sx:{mb:1.25,fontSize:12,lineHeight:"22px",whiteSpace:"nowrap",color:"text.disabled"},children:(0,le.Z)(new Date(c),{addSuffix:!1})}),d&&(0,o.jsx)(U.Z,{status:"unread",size:"small"})]})]})]})}function un(e){var n=e.conversations,t=e.isOpenSidebar,s=e.activeConversationId,a=e.sx,c=(0,sn.Z)(e,["conversations","isOpenSidebar","activeConversationId","sx"]),l=(0,ie.useRouter)().push,d=!n.allIds.length;return(0,o.jsx)(D.Z,(0,r.Z)((0,i.Z)({disablePadding:!0,sx:a},c),{children:(d?(0,A.Z)(Array(12)):n.allIds).map((function(e,i){return e?(0,o.jsx)(dn,{isOpenSidebar:t,conversation:n.byId[e],isSelected:s===e,onSelectConversation:function(){return function(e){var t="",i=n.byId[e];if("GROUP"===i.type)t=i.id;else{var r=i.participants.find((function(e){return"8864c717-587d-472a-929a-8e5f298024da-0"!==e.id}));(null===r||void 0===r?void 0:r.username)&&(t=null===r||void 0===r?void 0:r.username)}l(ae.vB.chat.view(t))}(e)}},e):(0,o.jsx)(an.i4,{},i)}))}))}dn.propTypes={isSelected:a().bool,conversation:a().object.isRequired,isOpenSidebar:a().bool,onSelectConversation:a().func},un.propTypes={conversations:a().object,isOpenSidebar:a().bool,activeConversationId:a().string,sx:a().object};var pn=(0,l.ZP)((function(e){return(0,o.jsx)(u.Z,(0,i.Z)({disableRipple:!0},e))}))((function(e){var n=e.theme;return{left:0,zIndex:9,width:32,height:32,position:"absolute",top:n.spacing(13),borderRadius:"0 12px 12px 0",color:n.palette.primary.contrastText,backgroundColor:n.palette.primary.main,boxShadow:n.customShadows.primary,"&:hover":{backgroundColor:n.palette.primary.darker}}}));function hn(){var e=(0,d.Z)(),n=(0,ie.useRouter)(),t=n.push,r=n.pathname,s=(0,c.useState)(!0),a=s[0],l=s[1],p=(0,c.useState)(""),v=p[0],m=p[1],j=(0,c.useState)([]),Z=j[0],y=j[1],b=(0,c.useState)(!1),w=b[0],C=b[1],I=(0,oe.v9)((function(e){return e.chat})),P=I.conversations,k=I.activeConversationId,R=(0,f.Z)("up","md"),T=v&&w,O=R&&!a;(0,c.useEffect)((function(){return R?_():A()}),[R,r]),(0,c.useEffect)((function(){if(!a)return C(!1)}),[a]);var _=function(){l(!0)},A=function(){l(!1)},q=function(){l((function(e){return!e}))},M=function(){var e=(0,ne.Z)((function(e){var n,t,i;return(0,te.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),n=e.target.value,m(n),n?[4,en.ZP.get("/api/chat/search",{params:{query:n}})]:[3,2];case 1:return t=r.sent(),y(t.data.results),[3,3];case 2:y([]),r.label=3;case 3:return[3,5];case 4:return i=r.sent(),console.error(i),[3,5];case 5:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),W=function(e){C(!1),m(""),t(ae.vB.chat.view(e))},z=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(h.Z,{sx:{py:2,px:3},children:[(0,o.jsxs)(Ie.Z,{direction:"row",alignItems:"center",justifyContent:"center",children:[!O&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Je,{}),(0,o.jsx)(h.Z,{sx:{flexGrow:1}})]}),(0,o.jsx)(u.Z,{onClick:q,children:(0,o.jsx)(g.Z,{width:20,height:20,icon:a?"eva:arrow-ios-back-fill":"eva:arrow-ios-forward-fill"})}),!O&&(0,o.jsx)($e(),{href:ae.vB.chat.new,passHref:!0,children:(0,o.jsx)(u.Z,{children:(0,o.jsx)(g.Z,{icon:"eva:edit-fill",width:20,height:20})})})]}),!O&&(0,o.jsx)(on,{query:v,onFocus:function(){C(!0)},onChange:M,onClickAway:function(){C(!1),m("")}})]}),(0,o.jsx)(S.Z,{children:T?(0,o.jsx)(nn,{query:v,results:Z,onSelectContact:function(e){W&&W(e.username)}}):(0,o.jsx)(un,{conversations:P,isOpenSidebar:a,activeConversationId:k,sx:(0,i.Z)({},w&&{display:"none"})})})]});return(0,o.jsxs)(o.Fragment,{children:[!R&&(0,o.jsx)(pn,{onClick:q,children:(0,o.jsx)(g.Z,{width:16,height:16,icon:"eva:people-fill"})}),R?(0,o.jsx)(x.ZP,{open:a,variant:"persistent",sx:(0,i.Z)({width:320,transition:e.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",width:320}},O&&{width:96,"& .MuiDrawer-paper":{width:96,position:"static",transform:"none !important",visibility:"visible !important"}}),children:z}):(0,o.jsx)(x.ZP,{ModalProps:{keepMounted:!0},open:a,onClose:A,sx:{"& .MuiDrawer-paper":{width:320}},children:z})]})}},8018:function(e,n,t){function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))}t.d(n,{Z:function(){return i}})}}]);